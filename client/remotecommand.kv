BoxLayout:
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: None
        height: '35dp'

        TextInput:
            mutiline: False
            id: address
            on_text_validate:
                self.focus = False
                port.focus = True
            #text: app.config.items('connections')[-1][0]

        TextInput:
            multiline: False
            id: port
            on_text_validate: app.connect(address.text, int(port.text))
            #text: app.config.items('connections')[-1][1]

        Button:
            text: 'connect'
            size_hint_x: None
            width: self.texture_size[0] + dp(2)
            on_press: app.connect(address.text, int(port.text))

    TabbedPanel:
        do_default_tab: False
        TabbedPanelItem:
            text: 'commands'
            ScrollView:
                do_scroll_x: False
                do_scroll_y: True

                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        on_parent: app.container = self
                        orientation: 'vertical'
                        size_hint_y: None
                        height: sum((x.height for x in self.children))
                        Button:
                            text: 'placeholder'

        TabbedPanelItem:
            text: 'image'
            Widget:
                canvas:
                    Rectangle:
                        texture: app.screen_texture
                        #size:Â self.size
                        pos: self.pos

    TabbedPanel:
        size_hint_y: .4
        do_default_tab: False
        TabbedPanelItem:
            text: 'logs'
            ScrollView:
                Label:
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    text: app.log

                    canvas:
                        Color:
                            rgba: .3, .3, .3, .5
                        Rectangle:
                            pos: 0, 0
                            size: self.width, self.top

        TabbedPanelItem:
            text: 'mouse'
            BoxLayout:
                BoxLayout:
                    size_hint_x: None
                    width: slabel.width
                    orientation: 'vertical'

                    Label:
                        id: slabel
                        text: 'sensivity'
                        width: self.texture_size[0]
                    Slider:
                        id: mslider
                        orientation: 'vertical'
                        value: app.mouse_sensivity
                        on_value: app.mouse_sensivity = self.value
                        min: 0.1
                        max: 10
                    Label:
                        text:  str(round(mslider.value, 4))
                        width: self.texture_size[0]

                MousePad:
                    canvas:
                        Color:
                            rgba: .9, .9, .9, .9
                        Rectangle:
                            pos: self.pos
                            size: self.size

                BoxLayout:
                    size_hint_x: None
                    width: dp(50)
                    orientation: 'vertical'
                    Button:
                        text: 'double\nclick'
                        on_press: app.mouse_click(n=2)
                    Button:
                        text: 'click'
                        on_press: app.mouse_press()
                        on_release: app.mouse_release()
                    Button:
                        text: 'right\nclick'
                        on_press: app.mouse_press(b=2)
                        on_release: app.mouse_release(b=2)

        TabbedPanelItem:
            text: 'keyboard'
            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    size_hint_y: None
                    height: dp(30)
                    TextInput:
                        multiline: False
                        on_text_validate:
                            app.send_keys(self.text)
                            self.text = ''
                GridLayout:
                    cols: 13
                    on_parent: app.populate_keyboard(self)

        TabbedPanelItem:
            text: 'status'
            ScrollView:
                BoxLayout:
                    orientation: 'vertical'
                    on_parent: app.status = self
